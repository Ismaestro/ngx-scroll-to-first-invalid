{
  "version": 3,
  "file": "ismaestro-ngx-scroll-to-first-invalid.js",
  "sources": [
    "ng://@ismaestro/ngx-scroll-to-first-invalid/projects/ngx-scroll-to-first-invalid/src/ngx-scroll-to-first-invalid.module.ts",
    "ng://@ismaestro/ngx-scroll-to-first-invalid/projects/ngx-scroll-to-first-invalid/src/ngx-scroll-to-first-invalid.directive.ts"
  ],
  "sourcesContent": [
    "import {NgModule} from '@angular/core';\nimport {NgxScrollToFirstInvalidDirective} from './ngx-scroll-to-first-invalid.directive';\n\n@NgModule({\n  imports: [],\n  declarations: [NgxScrollToFirstInvalidDirective],\n  exports: [NgxScrollToFirstInvalidDirective]\n})\nexport class NgxScrollToFirstInvalidModule {\n}\n",
    "import {Directive, ElementRef, HostListener, Input} from '@angular/core';\nimport {NgForm} from '@angular/forms';\n\n@Directive({selector: '[ngxScrollToFirstInvalid]'})\nexport class NgxScrollToFirstInvalidDirective {\n  @Input() formGroup: NgForm;\n\n  constructor(private el: ElementRef) {\n  }\n\n  static scrollToElement(element) {\n    if (element) {\n      const distance = window.pageYOffset - Math.abs(element.getBoundingClientRect().y);\n\n      window.scroll({\n        behavior: 'smooth',\n        left: 0,\n        top: element.getBoundingClientRect().top + window.scrollY - 150\n      });\n\n      setTimeout(() => {\n        element.focus();\n        element.blur(); // Trigger error messages\n        element.focus();\n      }, distance);\n    }\n  }\n\n  static markFormGroupTouched(formGroup) {\n    (<any>Object).values(formGroup.controls).forEach(control => {\n      control.markAsTouched();\n\n      if (control.controls) {\n        NgxScrollToFirstInvalidDirective.markFormGroupTouched(control);\n      }\n    });\n  }\n\n  @HostListener('submit', ['$event'])\n  onSubmit(event) {\n    event.preventDefault();\n\n    if (!this.formGroup.valid) {\n      NgxScrollToFirstInvalidDirective.markFormGroupTouched(this.formGroup);\n\n      const formControlInvalid = this.el.nativeElement.querySelector('.ng-invalid');\n\n      if (formControlInvalid) {\n        return NgxScrollToFirstInvalidDirective.scrollToElement(formControlInvalid);\n      } else {\n        // The first element is the global form and here we are looking for the first nested form\n        const formGroupInvalid = this.el.nativeElement.querySelectorAll('form .ng-invalid');\n        if (formGroupInvalid && formGroupInvalid.length) {\n          return NgxScrollToFirstInvalidDirective.scrollToElement(formGroupInvalid[0]);\n        }\n      }\n\n      return NgxScrollToFirstInvalidDirective.scrollToElement(this.el.nativeElement);\n    }\n  }\n}\n"
  ],
  "names": [],
  "mappings": ";;;;;;ACAA,AACA,IAAA,gCAAA,kBAAA,YAAA;;;;;QAMA,IAAA,CAAA,EAAA,GAAoC,EAApC,CAAA;KAAA;;;;;;QAGA,IAAA,OAAA,EAAA;YACQ,qBAAR,QAAA,GAAA,MAAA,CAAA,WAAA,GAAA,IAAA,CAAA,GAAA,CAAA,OAAA,CAAA,qBAAA,EAAA,CAAA,CAAA,CAAA,CAAA;YACM,MAAN,CAAA,MAAA,CAAA;gBAEA,QAAA,EAAoB,QAApB;gBACQ,IAAR,EAAA,CAAA;gBACQ,GAAR,EAAA,OAAA,CAAA,qBAAA,EAAA,CAAA,GAAA,GAAA,MAAA,CAAA,OAAA,GAAA,GAAA;aACA,CAAA,CAAA;YACA,UAAA,CAAA,YAAA;gBAEA,OAAiB,CAAjB,KAAA,EAAA,CAAA;gBACQ,OAAO,CAAC,IAAhB,EAAA,CAAuB;gBACf,OAAO,CAAC,KAAhB,EAAuB,CAAvB;aACA,EAAA,QAAe,CAAC,CAAhB;SACA;KACA,CAAA;;;;;;QAGA,EAAQ,MAAR,GAAA,MAAA,CAAA,SAAA,CAAA,QAAA,CAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;YACA,OAAA,CAAA,aAAgB,EAAC,CAAC;YACZ,IAAN,OAAA,CAAA,QAAA,EAAA;gBAEU,gCAAV,CAAA,oBAAA,CAAA,OAAA,CAAA,CAAA;aACA;SACA,CAAA,CAAA;KACA,CAAA;;;;;;QAIA,KAAW,CAAX,cAAA,EAAA,CAAA;QACI,IAAJ,CAAS,IAAT,CAAA,SAAA,CAAwB,KAAxB,EAAA;YAEQ,gCAAR,CAAA,oBAAA,CAAA,IAAA,CAAA,SAAA,CAAA,CAAA;YACM,qBAAN,kBAAA,GAAA,IAAA,CAAA,EAAA,CAAA,aAAA,CAAA,aAAA,CAAA,aAAA,CAAA,CAAA;YAEM,IAAN,kBAAA,EAAA;gBAEU,OAAV,gCAAA,CAAA,eAAA,CAAA,kBAAA,CAAA,CAAA;aACA;iBACA;;;gBAEQ,IAAR,gBAAA,IAAA,gBAAA,CAAA,MAAsC,EAAE;oBAC5B,OAAZ,gCAAA,CAAA,eAAA,CAAA,gBAAA,CAAA,CAAA,CAAA,CAAA,CAAA;iBACA;aACA;YACA,OAAA,gCAAA,CAAA,eAAA,CAAA,IAAA,CAAA,EAAA,CAAA,aAAA,CAAA,CAAA;SAEA;KACA,CAAA;;;AAvDA,gCAAY,CAAZ,UAAA,GAAA;;;;AAHA,gCAAA,CAAA,cAAA,GAAA,YAAA,EAAA,OAAA;;;AAKA,gCAAA,CAAA,cAAA,GAAA;IAiCA,WAAA,EAAA,CAAA,EAAA,IAAA,EAAA,KAAA,EAAA,EAAA;;;;;;;;ADtCA,AAQA,IAAA,6BAAA,kBAAA,YAAA;;;IALA,OAAA,6BAAA,CAAA;CACA,EAAA,CAAA,CAAA;AACA,AACA,6BAAA,CAAA,UAAA,GAAA;IACA,EAAA,IAAA,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA;;;;;;;;;;;;;;;;;;;;;"
}
